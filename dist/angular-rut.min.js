/**
 * Chilean RUT module for angular
 * @version v0.3.0 - 2014-12-05
 * @link https://github.com/angular-platanus/rut
 * @author Jaime Bunzli <jpbunzli@gmail.com>, Ignacio Baixas <ignacio@platan.us>, Ren√© Morales <rene.morales.sanchez@gmail.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(a){"use strict";function b(a){return"string"==typeof a?a.replace(/[^0-9kK]+/g,"").toUpperCase():""}function c(a,c){if(a=b(a),!a)return c;if(a.length<=1)return a;for(var d=a.slice(-4,-1)+"-"+a.substr(a.length-1),e=4;e<a.length;e+=3)d=a.slice(-3-e,-e)+"."+d;return d}function d(a){if("string"!=typeof a)return!1;for(var b=parseInt(a.slice(0,-1),10),c=0,d=1;b>0;)d=(d+b%10*(9-c++%6))%11,b=Math.floor(b/10);var e=d>0?d-1+"":"K";return e===a.slice(-1)}function e(a){var c=function(c){var e=!0;return c&&(c=b(c),e=d(c)),a.$setValidity("rut",e),c};a.$parsers.unshift(c),a.$formatters.unshift(c)}function f(a){a.$viewChangeListeners.push(function(){a.$setViewValue(c(a.$viewValue)),a.$render()})}function g(a,b){a.on("blur",function(){b.$setViewValue(c(b.$viewValue)),b.$render()})}a.module("platanus.rut",[]).directive("ngRut",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){switch("undefined"==typeof c.rutFormat&&(c.rutFormat="live"),e(d),c.rutFormat){case"live":f(d);break;case"blur":g(b,d)}}}}).filter("rut",function(){return c}).constant("RutHelper",{format:c,clean:b,validate:function(a){return d(b(a))}})}(angular);