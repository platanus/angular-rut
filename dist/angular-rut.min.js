/**
 * Chilean RUT module for angular
 * @version v1.0.1 - 2014-12-17
 * @link https://github.com/angular-platanus/rut
 * @author Jaime Bunzli <jpbunzli@gmail.com>, Ignacio Baixas <ignacio@platan.us>, Ren√© Morales <rene.morales.sanchez@gmail.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(t){"use strict";function r(t){return"string"==typeof t?t.replace(/[^0-9kK]+/g,"").toUpperCase():""}function e(t,e){if(t=r(t),!t)return e;if(t.length<=1)return t;for(var n=t.slice(-4,-1)+"-"+t.substr(t.length-1),u=4;u<t.length;u+=3)n=t.slice(-3-u,-u)+"."+n;return n}function n(t,r){if("string"!=typeof t)return!1;if(0===t.length&&!r)return!0;for(var e=parseInt(t.slice(0,-1),10),n=0,u=1;e>0;)u=(u+e%10*(9-n++%6))%11,e=Math.floor(e/10);var i=u>0?u-1+"":"K";return i===t.slice(-1)}function u(t,u){var i=function(r){var e=n(r,u);return t.$setValidity("rut",e),e},a=function(t){return t=r(t),i(t)?t:null},o=function(t){return t=r(t),i(t),e(t)};t.$parsers.unshift(a),t.$formatters.unshift(o)}function i(t,r){t.$watch(function(){return r.$viewValue},function(){r.$setViewValue(e(r.$viewValue)),r.$render()})}function a(t,r){t.on("blur",function(){r.$setViewValue(e(r.$viewValue)),r.$render()})}t.module("platanus.rut",[]).directive("ngRut",function(){return{restrict:"A",require:"ngModel",link:function(t,r,e,n){"undefined"==typeof e.rutFormat&&(e.rutFormat="live");var o=e.required?!0:!1;switch(u(n,o),e.rutFormat){case"live":i(t,n);break;case"blur":a(r,n)}}}}).filter("rut",function(){return e}).constant("RutHelper",{format:e,clean:r,validate:function(t){return n(r(t))}})}(angular);
